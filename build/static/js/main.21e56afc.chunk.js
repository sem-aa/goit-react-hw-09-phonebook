(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{11:function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"c",(function(){return h})),r.d(e,"b",(function(){return y}));var n=r(16),c=r.n(n),a=r(23),u=r(18),s=r.n(u),o=r(2),i={registerRequest:Object(o.b)("auth/registerRequest"),registerSuccess:Object(o.b)("auth/registerSuccess"),registerError:Object(o.b)("auth/registerError"),loginRequest:Object(o.b)("auth/loginRequest"),loginSuccess:Object(o.b)("auth/loginSuccess"),loginError:Object(o.b)("auth/loginError"),logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")};s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b,l,j,d,O=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},f=function(){s.a.defaults.headers.common.Authorization=""},g={register:function(t,e,r){return function(){var n=Object(a.a)(c.a.mark((function n(a){var u,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u={name:t,email:e,password:r},a(i.registerRequest()),n.prev=2,n.next=5,s.a.post("/users/signup",u);case 5:o=n.sent,O(o.data.token),a(i.registerSuccess(o.data)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),a(i.registerError(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:f(),e(i.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(i.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t,e){return function(){var r=Object(a.a)(c.a.mark((function r(n){var a,u;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={email:t,password:e},n(i.loginRequest()),r.prev=2,r.next=5,s.a.post("/users/login",a);case 5:u=r.sent,O(u.data.token),n(i.loginSuccess(u.data)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),n(i.loginError(r.t0.message));case 13:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(t){return r.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),a=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return O(a),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:u=t.sent,e(i.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}},h={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getToken:function(t){return t.auth.token}},p=r(3),x=r(6),v={name:null,email:null},m=Object(o.c)(v,(b={},Object(p.a)(b,i.registerSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.loginSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.logoutSuccess,(function(){return v})),Object(p.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),b)),k=Object(o.c)(null,(l={},Object(p.a)(l,i.registerSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.loginSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.logoutSuccess,(function(){return null})),l)),S=Object(o.c)(null,(j={},Object(p.a)(j,i.registerError,(function(t,e){return e.payload})),Object(p.a)(j,i.loginError,(function(t,e){return e.payload})),Object(p.a)(j,i.logoutError,(function(t,e){return e.payload})),Object(p.a)(j,i.getCurrentUserError,(function(t,e){return e.payload})),j)),C=Object(o.c)(!1,(d={},Object(p.a)(d,i.registerSuccess,(function(){return!0})),Object(p.a)(d,i.loginSuccess,(function(){return!0})),Object(p.a)(d,i.getCurrentUserSuccess,(function(){return!0})),Object(p.a)(d,i.registerError,(function(){return!1})),Object(p.a)(d,i.loginError,(function(){return!1})),Object(p.a)(d,i.getCurrentUserError,(function(){return!1})),Object(p.a)(d,i.logoutSuccess,(function(){return!1})),d)),y=Object(x.c)({user:m,isAuthenticated:C,token:k,error:S})},21:function(t,e,r){t.exports={link:"Auth_link__2cj8C",activeStyle:"Auth_activeStyle__2aSrc",App:"Auth_App__3-Teb"}},30:function(t,e,r){t.exports={icon:"UserMenu_icon__1oQlr",btn:"UserMenu_btn__3PSaW"}},31:function(t,e,r){t.exports={AppBar:"AppBar_AppBar__QdgHm",link:"AppBar_link__3Dt2z"}},60:function(t,e,r){},8:function(t,e,r){"use strict";r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return a})),r.d(e,"h",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return b})),r.d(e,"g",(function(){return l})),r.d(e,"e",(function(){return j})),r.d(e,"d",(function(){return d}));var n=r(2),c=Object(n.b)("contacts/fetchContactRequest"),a=Object(n.b)("contacts/fetchContactSuccess"),u=Object(n.b)("contacts/fetchContactError"),s=Object(n.b)("contacts/addContactRequest"),o=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),l=Object(n.b)("contacts/deleteContactSuccess"),j=Object(n.b)("contacts/deleteContactError"),d=Object(n.b)("contacts/filter")},83:function(t,e,r){"use strict";r.r(e);var n=r(1),c=r(0),a=r.n(c),u=r(25),s=r.n(u),o=r(10),i=r(15),b=r(48),l=(r(60),r(5)),j=r(21),d=r.n(j),O=function(){return Object(n.jsxs)("div",{className:d.a.App,children:[Object(n.jsx)(i.b,{to:"/register",exat:!0,className:d.a.link,activeClassName:d.a.activeStyle,children:"Register"}),Object(n.jsx)(i.b,{to:"/login",exat:!0,className:d.a.link,activeClassName:d.a.activeStyle,children:"LogIn"})]})},f=r(11),g=r.p+"static/media/icon-login.a7f69bf7.png",h=r(30),p=r.n(h);function x(){var t=Object(o.b)(),e=Object(o.c)(f.c.getUserName),r=Object(c.useCallback)((function(){return t(f.a.logOut())}),[t]);return Object(n.jsxs)("div",{className:p.a.user,children:[Object(n.jsx)("img",{className:p.a.icon,src:g,alt:"",width:"24"}),Object(n.jsxs)("span",{children:[" Welcome, ",e," "]}),Object(n.jsx)("button",{className:p.a.btn,type:"button",onClick:r,children:"Logout"})]})}var v=r(31),m=r.n(v);function k(){var t=Object(o.c)(f.c.getIsAuthenticated);return Object(n.jsxs)("div",{className:m.a.AppBar,children:[t&&Object(n.jsx)(i.b,{className:m.a.link,to:"/contacts",exat:!0,activeClassName:m.a.activeStyle,children:"Contacts"}),t?Object(n.jsx)(x,{}):Object(n.jsx)(O,{})]})}var S=r(20),C=r(29);function y(t){t.isAuthenticated;var e=t.redirectTo,r=t.children,c=Object(C.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(o.c)(f.c.getToken);return Object(n.jsx)(l.b,Object(S.a)(Object(S.a)({},c),{},{children:a?r:Object(n.jsx)(l.a,{to:e})}))}function E(t){t.isAuthenticated;var e=t.redirectTo,r=t.children,c=Object(C.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(o.c)(f.c.getIsAuthenticated);return Object(n.jsx)(l.b,Object(S.a)(Object(S.a)({},c),{},{children:a&&c.restricted?Object(n.jsx)(l.a,{to:e}):r}))}var A=Object(c.lazy)((function(){return r.e(5).then(r.bind(null,95))})),_=Object(c.lazy)((function(){return r.e(4).then(r.bind(null,96))})),U=Object(c.lazy)((function(){return Promise.all([r.e(6),r.e(3)]).then(r.bind(null,98))}));function w(){var t=Object(o.b)();return Object(c.useEffect)((function(){t(f.a.getCurrentUser())}),[t]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k,{}),Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(E,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(n.jsx)(A,{})}),Object(n.jsx)(E,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(n.jsx)(_,{})}),Object(n.jsx)(y,{path:"/contacts",redirectTo:"/login",children:Object(n.jsx)(U,{})})]})})]})}var R,q,N=function(t){t&&t instanceof Function&&r.e(7).then(r.bind(null,97)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,a=e.getLCP,u=e.getTTFB;r(t),n(t),c(t),a(t),u(t)}))},T=r(28),B=r(2),z=r(49),I=r.n(z),F=r(3),L=r(6),P=r(8),M=Object(B.c)([],(R={},Object(F.a)(R,P.j,(function(t,e){return e.payload})),Object(F.a)(R,P.c,(function(t,e){var r=e.payload;return[].concat(Object(T.a)(t),[r])})),Object(F.a)(R,P.g,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),R)),D=Object(B.c)("",Object(F.a)({},P.d,(function(t,e){return e.payload}))),J=Object(B.c)(!1,(q={},Object(F.a)(q,P.b,(function(){return!0})),Object(F.a)(q,P.c,(function(){return!1})),Object(F.a)(q,P.a,(function(){return!1})),Object(F.a)(q,P.f,(function(){return!0})),Object(F.a)(q,P.g,(function(){return!1})),Object(F.a)(q,P.e,(function(){return!1})),Object(F.a)(q,P.i,(function(){return!0})),Object(F.a)(q,P.j,(function(){return!1})),Object(F.a)(q,P.h,(function(){return!1})),q)),Q=Object(L.c)({items:M,filter:D,loading:J}),W=r(17),H=r(50),G=r.n(H),K=[].concat(Object(T.a)(Object(B.d)({serializableCheck:{ignoredActions:[W.a,W.f,W.b,W.c,W.d,W.e]}})),[I.a]),V={key:"auth",storage:G.a,whitelist:["token"]},X=Object(B.a)({reducer:{auth:Object(W.g)(V,f.b),contacts:Q},middleware:K,devTools:!1}),Y={store:X,persistor:Object(W.h)(X)};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(o.a,{store:Y.store,children:Object(n.jsx)(b.a,{loading:null,persistor:Y.persistor,children:Object(n.jsx)(i.a,{children:Object(n.jsx)(w,{})})})})}),document.getElementById("root")),N()}},[[83,1,2]]]);
//# sourceMappingURL=main.21e56afc.chunk.js.map