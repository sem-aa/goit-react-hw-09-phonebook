(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[1],{11:function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"c",(function(){return h})),r.d(e,"b",(function(){return y}));var n=r(17),c=r.n(n),a=r(25),u=r(19),s=r.n(u),o=r(2),i={registerRequest:Object(o.b)("auth/registerRequest"),registerSuccess:Object(o.b)("auth/registerSuccess"),registerError:Object(o.b)("auth/registerError"),loginRequest:Object(o.b)("auth/loginRequest"),loginSuccess:Object(o.b)("auth/loginSuccess"),loginError:Object(o.b)("auth/loginError"),logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")};s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b,j,l,d,O=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},f=function(){s.a.defaults.headers.common.Authorization=""},g={register:function(t,e,r){return function(){var n=Object(a.a)(c.a.mark((function n(a){var u,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u={name:t,email:e,password:r},a(i.registerRequest()),n.prev=2,n.next=5,s.a.post("/users/signup",u);case 5:o=n.sent,O(o.data.token),a(i.registerSuccess(o.data)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),a(i.registerError(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:f(),e(i.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(i.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t,e){return function(){var r=Object(a.a)(c.a.mark((function r(n){var a,u;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={email:t,password:e},n(i.loginRequest()),r.prev=2,r.next=5,s.a.post("/users/login",a);case 5:u=r.sent,O(u.data.token),n(i.loginSuccess(u.data)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),n(i.loginError(r.t0.message));case 13:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(t){return r.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r(),a=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return O(a),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:u=t.sent,e(i.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,r){return t.apply(this,arguments)}}()}},h={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name},getToken:function(t){return t.auth.token}},p=r(3),x=r(6),v={name:null,email:null},m=Object(o.c)(v,(b={},Object(p.a)(b,i.registerSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.loginSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.logoutSuccess,(function(){return v})),Object(p.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),b)),k=Object(o.c)(null,(j={},Object(p.a)(j,i.registerSuccess,(function(t,e){return e.payload.token})),Object(p.a)(j,i.loginSuccess,(function(t,e){return e.payload.token})),Object(p.a)(j,i.logoutSuccess,(function(){return null})),j)),C=Object(o.c)(null,(l={},Object(p.a)(l,i.registerError,(function(t,e){return e.payload})),Object(p.a)(l,i.loginError,(function(t,e){return e.payload})),Object(p.a)(l,i.logoutError,(function(t,e){return e.payload})),Object(p.a)(l,i.getCurrentUserError,(function(t,e){return e.payload})),l)),S=Object(o.c)(!1,(d={},Object(p.a)(d,i.registerSuccess,(function(){return!0})),Object(p.a)(d,i.loginSuccess,(function(){return!0})),Object(p.a)(d,i.getCurrentUserSuccess,(function(){return!0})),Object(p.a)(d,i.registerError,(function(){return!1})),Object(p.a)(d,i.loginError,(function(){return!1})),Object(p.a)(d,i.getCurrentUserError,(function(){return!1})),Object(p.a)(d,i.logoutSuccess,(function(){return!1})),d)),y=Object(x.c)({user:m,isAuthenticated:S,token:k,error:C})},33:function(t,e,r){t.exports={link:"Auth_link__2cj8C"}},34:function(t,e,r){t.exports={user:"UserMenu_user__2sKjY",icon:"UserMenu_icon__1oQlr",text:"UserMenu_text__3jVxO"}},42:function(t,e,r){t.exports={AppBar:"AppBar_AppBar__QdgHm",link:"AppBar_link__3Dt2z"}},65:function(t,e,r){},8:function(t,e,r){"use strict";r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return a})),r.d(e,"h",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return b})),r.d(e,"g",(function(){return j})),r.d(e,"e",(function(){return l})),r.d(e,"d",(function(){return d}));var n=r(2),c=Object(n.b)("contacts/fetchContactRequest"),a=Object(n.b)("contacts/fetchContactSuccess"),u=Object(n.b)("contacts/fetchContactError"),s=Object(n.b)("contacts/addContactRequest"),o=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),d=Object(n.b)("contacts/filter")},89:function(t,e,r){"use strict";r.r(e);var n=r(1),c=r(0),a=r.n(c),u=r(28),s=r.n(u),o=r(10),i=r(16),b=r(53),j=(r(65),r(5)),l=r(33),d=r.n(l),O=r(91),f=function(){return Object(n.jsxs)("div",{className:d.a.App,children:[Object(n.jsx)(i.b,{to:"/register",exat:!0,className:d.a.link,children:Object(n.jsx)(O.a,{variant:"primary",children:"Register"})}),Object(n.jsx)(i.b,{to:"/login",exat:!0,className:d.a.link,children:Object(n.jsx)(O.a,{variant:"primary",children:"LogIn"})})]})},g=r(11),h=r.p+"static/media/icon-login.a7f69bf7.png",p=r(34),x=r.n(p);function v(){var t=Object(o.b)(),e=Object(o.c)(g.c.getUserName),r=Object(c.useCallback)((function(){return t(g.a.logOut())}),[t]);return Object(n.jsxs)("div",{className:x.a.user,children:[Object(n.jsx)("img",{className:x.a.icon,src:h,alt:"",width:"24"}),Object(n.jsxs)("span",{className:x.a.text,children:[" Welcome, ",e," "]}),Object(n.jsx)(O.a,{variant:"outline-secondary",type:"button",onClick:r,children:" Logout"})]})}var m=r(42),k=r.n(m);function C(){var t=Object(o.c)(g.c.getIsAuthenticated);return Object(n.jsxs)("div",{className:k.a.AppBar,children:[t&&Object(n.jsx)(i.b,{className:k.a.link,to:"/contacts",exat:!0,children:Object(n.jsx)(O.a,{variant:"outline-secondary",children:" Contacts"})}),t?Object(n.jsx)(v,{}):Object(n.jsx)(f,{})]})}var S=r(22),y=r(32);function E(t){t.isAuthenticated;var e=t.redirectTo,r=t.children,c=Object(y.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(o.c)(g.c.getToken);return Object(n.jsx)(j.b,Object(S.a)(Object(S.a)({},c),{},{children:a?r:Object(n.jsx)(j.a,{to:e})}))}function U(t){t.isAuthenticated;var e=t.redirectTo,r=t.children,c=Object(y.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(o.c)(g.c.getIsAuthenticated);return Object(n.jsx)(j.b,Object(S.a)(Object(S.a)({},c),{},{children:a&&c.restricted?Object(n.jsx)(j.a,{to:e}):r}))}r(86);var A=r(90),_=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,106))})),w=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,107))})),R=Object(c.lazy)((function(){return Promise.all([r.e(0),r.e(7),r.e(4)]).then(r.bind(null,110))}));function q(){var t=Object(o.b)();return Object(c.useEffect)((function(){t(g.a.getCurrentUser())}),[t]),Object(n.jsxs)(A.a,{children:[Object(n.jsx)(C,{}),Object(n.jsx)(c.Suspense,{fallback:Object(n.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(U,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(n.jsx)(_,{})}),Object(n.jsx)(U,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(n.jsx)(w,{})}),Object(n.jsx)(E,{path:"/contacts",redirectTo:"/login",children:Object(n.jsx)(R,{})})]})})]})}var T,N,B=function(t){t&&t instanceof Function&&r.e(8).then(r.bind(null,108)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,a=e.getLCP,u=e.getTTFB;r(t),n(t),c(t),a(t),u(t)}))},z=r(31),I=r(2),L=r(54),P=r.n(L),F=r(3),M=r(6),D=r(8),J=Object(I.c)([],(T={},Object(F.a)(T,D.j,(function(t,e){return e.payload})),Object(F.a)(T,D.c,(function(t,e){var r=e.payload;return[].concat(Object(z.a)(t),[r])})),Object(F.a)(T,D.g,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),T)),Q=Object(I.c)("",Object(F.a)({},D.d,(function(t,e){return e.payload}))),H=Object(I.c)(!1,(N={},Object(F.a)(N,D.b,(function(){return!0})),Object(F.a)(N,D.c,(function(){return!1})),Object(F.a)(N,D.a,(function(){return!1})),Object(F.a)(N,D.f,(function(){return!0})),Object(F.a)(N,D.g,(function(){return!1})),Object(F.a)(N,D.e,(function(){return!1})),Object(F.a)(N,D.i,(function(){return!0})),Object(F.a)(N,D.j,(function(){return!1})),Object(F.a)(N,D.h,(function(){return!1})),N)),K=Object(M.c)({items:J,filter:Q,loading:H}),V=r(18),W=r(55),Y=r.n(W),G=[].concat(Object(z.a)(Object(I.d)({serializableCheck:{ignoredActions:[V.a,V.f,V.b,V.c,V.d,V.e]}})),[P.a]),X={key:"auth",storage:Y.a,whitelist:["token"]},Z=Object(I.a)({reducer:{auth:Object(V.g)(X,g.b),contacts:K},middleware:G,devTools:!1}),$={store:Z,persistor:Object(V.h)(Z)};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(o.a,{store:$.store,children:Object(n.jsx)(b.a,{loading:null,persistor:$.persistor,children:Object(n.jsx)(i.a,{children:Object(n.jsx)(q,{})})})})}),document.getElementById("root")),B()}},[[89,2,3]]]);
//# sourceMappingURL=main.028c655c.chunk.js.map